<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
    <title>天天基金网</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" />
    <meta name="keywords" content="天天基金优选基金组合" />
    <meta name="description" content="专业理财，天天优选，为您提供更专业的理财服务" />
    <!--禁用手机号码链接(for iPhone)-->
    <meta name="format-detection" content="telephone=no" />
    <!--控制全屏时顶部状态栏的外，默认白色-->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <!--是否允许全屏显，只有在桌面启动时可用-->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link href="css/main.css" rel="stylesheet" type="text/css" />
    <script src="js/jquery-1.10.2.min.js"  type="text/javascript"></script>
    <script src="js/echarts-all.js"></script>
    <script type="text/javascript">
    //auto adaptation
    var calculate_size = function() {
        var docEl = document.documentElement;
		var clientWidth1 = document.querySelector("#container").clientWidth; 
        if (!clientWidth1) return;
        docEl.style.fontSize = 100*(clientWidth1 /640) + 'px';
    };
    // Abort if browser does not support addEventListener
    if (document.addEventListener) {
        var resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize';
        window.addEventListener(resizeEvt, calculate_size, false);
        document.addEventListener('DOMContentLoaded', calculate_size, false);
        calculate_size();
    }
    </script>
    
   

</head>

<body>
<div id="container">
	<div class="bg"></div>
    <div class="text">
    	历经2015年股市的大起大落，越来越多投资者更深刻地认识到构建合理投资组合的重要性。大量研究数据表明，通过科学的基金组合配置可在降低市场风险的同时提高投资收益，相比投资单个基金和单一品种，基金组合的回报更为稳定。对于不同风险偏好的投资者来说，都可参考不同的比例配置来实现不同的投资目标。
    </div>
    <div class="tab">
    	<div class="tab_head">
        	<a id="jiji">积极型投资者</a>
            <a id="wenjian" class="checked">稳健型投资者</a>
            <a id="baoshou">保守型投资者</a>
        </div>
        <div class="tab_main"></div>
    </div>
    
    <div class="ctitle"><span>组合收益率走势</span></div>
    <div id="qx"></div>
    
    <div class="ctitle"><span>基金组合资产配置情况</span></div>
    <div id="rose"></div>
    
    
    <div class="jjcc">
    	<span>基金持仓</span>
    </div>
    
    <table class="jjcctable" cellspacing="0" cellpadding="0">
    <thead>
      <tr>
        <td class="left">股票名称</td>
        <td class="right">持仓基金</td>
        <td class="right">涨跌幅</td>
      </tr>
    </thead>
    <tbody></tbody>
    </table>

    
    <div class="bottom">
    数据来源：东方财富Choice数据，银河证券<br />
    截止日期：<span class="deadline"></span><br />
    免责声明：收益率数据仅供参考，过往业绩不预示未来表现，不构成投资建议。投资者据此操作，风险自担。市场有风险，投资需谨慎。
    </div>
	<!--<a class="text_a"  onclick="CNT(4492)" href="https://fundzt.eastmoney.com/2016/hqb/"></a>
    <a class="button_a" href="http://ttjj-huodong-hqb">立即抢购</a>-->
</div>
  
       <div class="about" style="    margin-bottom: 0;">        <h2 class="title">关于天天基金网</h2>        <p class="para" style="     text-indent: 0;   text-align: justify;">天天基金是中国A股首家财经门户网站--东方财富网（股票代码：300059）旗下的全资子公司，同时也是证监会批准的首批独立基金销售机构。天天基金网凭借其专业、及时、全面、权威的财经平台优势，为广大投资者提供一站式金融理财服务。截至2015年底，天天基金网基金累计销量超10000亿元。</p>        <ul class="feature">            <li>                <h3><span class="icon icon-1">1</span>安全可靠</h3>                <p>民生银行保障</p>            </li>            <li>                <h3><span class="icon icon-2">2</span>轻松理财</h3>                <p>随时随地交易</p>            </li>            <li>                <h3><span class="icon icon-3">3</span>费率超低</h3>                <p>费率1折起</p>            </li>        </ul>    </div>       
           
    


<script type="text/javascript" src="https://img.1234567.com.cn/counter.js"></script>
<script type="text/javascript">
/*CNT(4492);*/
function CNT(id) {
                $.ajax({
                    url: "https://fundhd.eastmoney.com/fundapiweb/count.ashx?id=" + id + "&t=" +new Date().valueOf(),
                    data: {},
                    dataType: "jsonp",
                    success: function() {}
                });
            }
</script>

<script>
$(document).ready(function(){
	getAjax("https://yuyu2012.github.io/js/jiji.json");
	
	/*tab切换*/
	$(".tab_head a").click( function () {
		$(".tab_head a").removeClass("checked");
		 $(this).addClass("checked"); 
		 var thisId=$(this).attr("id");
		 if(thisId=="jiji"){getAjax("https://yuyu2012.github.io/js/jiji.json");};
		 if(thisId=="wenjian"){getAjax("https://yuyu2012.github.io/js/wenjian.json");};
		 if(thisId=="baoshou"){getAjax("https://yuyu2012.github.io/js/baoshou.json");};
	});

/*曲线图表开始*/
function linechart(jsonData){
var qxChart = echarts.init(document.getElementById('qx'));

	

var shangzheng = [];//series data的变量
var shangzhengtime=[];
    var ss=jsonData.data.C000001;
	for(var dd in ss){ 
		var shangzhengdata=ss[dd];
		shangzheng.push(shangzhengdata);
		//console.log(shangzheng);
		/*x轴的时间*/
		var ktime=dd;
		shangzhengtime.push(ktime);
	}
	shangzhengtime.sort();
	//console.log(shangzhengtime);
var zuhe = [];//series data的变量
    var s=jsonData.data.YXZH010;
	for(var d in s){ 
		var zuhedata=s[d];
		zuhe.push(zuhedata);
		
	}//console.log(zuhe);
	
	
	
	
option = {
	color:['#f56800','#00a0e9'], 
    legend: {
		y:"20px",
        data:['组合近1月走势','上证指数近1月走势'],
    },

    grid: {
        left: '1%',
        right: '1%',
        bottom: '3%',
        containLabel: true
    },
    yAxis: {
        type: 'value',
		axisLine:false,
        axisLabel: {
            formatter: '{value} %'
        }
    },

    xAxis: {
        type: 'category',
        axisLine:false,
        boundaryGap: false,
		//axisLabel:false,
        data: shangzhengtime,
    },
	
    series: [
        {
            name: '组合近1月走势',
            type: 'line',
            smooth: true,
            lineStyle: {
                normal: {
                    width: 3,
                    shadowColor: '#f56800',
                    shadowBlur: 10,
                    shadowOffsetY: 10
                }
            },
			data:zuhe
           /* data:[0, 0.0034, 0.0068, 0.0567, 0.0601, 0.0635, 0.1072, 0.1111, 0.1207, 0.1649, 0.1708, 0.174, 0.1772, 0.147, 0.153, 0.1582, 0.2014, 0.2062, 0.221, 0.2288, 0.2369, 0.2443, 0.2481, 0.2693, 0.2731, 0.3179, 0.3216, 0.3326, 0.3363, 0.3026, 0.2661, 0.2693, 0.2792, 0.2824, 0.2856, 0.2888, 0.2522, 0.2221, 0.2254, 0.2287, 0.1922]*/
        },
		{
            name: '上证指数近1月走势',
            type: 'line',
            smooth: true,
            lineStyle: {
                normal: {
                    width: 3,
                    shadowColor: '#00a0e9',
                    shadowBlur: 10,
                    shadowOffsetY: 10
                }
            },
			data:shangzheng
            /*data:[0, 0.8586, 1.8144, -1.5775, 0.3445, 0.7281, 3.7011, 5.2526, 3.9053, 3.7948, 5.2976, 0.3536, 1.6724, 0.4518, -1.3817, 0.5154, 1.9353, 5.9347, 5.6245, 4.5532, 2.4617, 5.4123, 7.1371, 5.5704, 6.4665, 7.6134, 8.0162, 6.7777, 3.6218, 3.4035, 3.6492, 5.6094, 7.0503, 4.7471, 6.1047, 8.1652, 6.4561, 4.3129, 3.8446, 4.0362, 3.3656, 3.1106]*/
        }
    ]
};

qxChart.setOption(option);
}
/*曲线图表结束*/


/*南丁格尔玫瑰开始*/	
function renderPie(Fdata) {
    var roseChart = echarts.init(document.getElementById('rose'));

    var pieData = [];//series data的变量
    $.each(Fdata.data.YXZHCC, function(index, val) {
        var m = {
            value: val.FRATIO,
            name: val.FUNDTYPE
        };
         pieData.push(m);
    });
	var roseName=[];//legend data的变量
	$.each(Fdata.data.YXZHCC, function(index, val) {
        var n = {
            name: val.FUNDTYPE
        };
         roseName.push(n);
    });

    var option = {
        color:['#ff7474','#7cc3ff','#afec3a','#ffae00','#e880e2','#c9447f'], 
        title : {
            x:'center'
        },
        tooltip : {
            trigger: 'item',
            formatter: "{a} {b} : {c} %"
        },
        legend: {
            x : 'center',
            y : 'bottom',
            data:roseName
        },
        series : [
        {
                type:'pie',
                radius : [40, 80],
                center : ['50%', 120],
                roseType : 'radius',
                label: {
                    normal: {
                        show: false
                    },
                    emphasis: {
                        show: true
                    }
                },
                data:pieData//data传了变量
            }
        ]
    };


    roseChart.setOption(option);

}
/*南丁格尔玫瑰结束*/


function getAjax(jsonUrl){
  $.ajax({
		type:"GET",
		url:jsonUrl,
		dataType: "json",
		success: function(data0){
			
			
			/*南丁格尔玫瑰*/
			// var roseOptions = roseChart.getOption();
			
			$.each(data0.data.YXZHCC,function(index, val){
				
				switch (val.FUNDTYPE)
					{
					case "001":
					  val.FUNDTYPE="股票型";
					  break;
					case "002":
					  val.FUNDTYPE="混合型";
					  break;
					case "003":
					  val.FUNDTYPE="债券型";
					  break;
					case "005":
					  val.FUNDTYPE="货币型";
					  break;
					case "007":
					  val.FUNDTYPE="QDII";
					  break;
					case "205":
					  val.FUNDTYPE="其他";
					  break;
					}
			}) 

            renderPie(data0);
			linechart(data0);
			
			// roseChart.setOption(roseOptions);			
			
			
			//alert(data0.data.YXZH[0].SHORTNAME); 基金名称
			//alert(data0.data.YXZH[0].FSE); 基金收益率
			//alert(data0.data.YXZH[0].FSENAME); 近两年
			//alert(data0.data.YXZH[0].SOURCERATE); 原手续费
			//alert(data0.data.YXZH[0].RATE); 现手续费
			//alert(data0.data.YXZH[0].MINSG); 起购费
			//alert(data0.data.YXZH[0].IRATIO); 进度条
			//alert(data0.data.YXZH[0].FCODE); 基金代码
			
			/*截止时间*/
			$.each(data0.data.YXZH,function(i){
				 deadline=data0.data.YXZH[i].SYRQ.replace(/\-/g, "\/");
				var ndl=new Date(deadline);
				//alert(ndl);
				var maxdata=new Date(2010/02/01);
				
				 if(deadline>maxdata){
				   maxdata=deadline;
				 }
				
			})
			$(".deadline").empty();
			$(".deadline").append(deadline);
			
			
			$(".tab_main").empty();
			$.each(data0.data.YXZH,function(i){
				var tmjj="<div class='tm_jj'><div class='tm_jj_left'><a href='http://ttjj-normal-buy/?name="+data0.data.YXZH[i].SHORTNAME+"&id="+data0.data.YXZH[i].FCODE+"'>"+data0.data.YXZH[i].SHORTNAME+"</a><ul><li class='fsli'><span>"+data0.data.YXZH[i].FSENAME+"</span><b class='fse'>"+data0.data.YXZH[i].FSE+"%</b></li><li><span>购买手续费</span><span><del>"+data0.data.YXZH[i].SOURCERATE+"</del><a>"+data0.data.YXZH[i].RATE+"</a></span></li></ul></div><div class='tm_jj_right'><span class='qg'>"+data0.data.YXZH[i].MINSG+"元起购</span><div class='circle'><div class='pie_left'><div class='cic_left'></div></div><div class='pie_right'><div class='cic_right'></div></div><div class='mask'><span>"+data0.data.YXZH[i].IRATIO+"</span>%</div</div></div></div>";
				
				$(".tab_main").append(tmjj);
			})
			
			/*FSE 去掉%，小数点后保留2位四舍五入*/
			$(".fse").each(function() {
				var fsetext=$(this).text();
				var fsenum=parseFloat(fsetext.substring(0,fsetext.length-1));
				var fsenum2=fsenum.toFixed(2);
				$(this).text(fsenum2+"%");
			  })
			
			/*假如原购买手续费与现购买手续费相同，则不显示原手续费*/
				/*假如原购买手续费是0元，直接显示0费率*/
				$(".tm_jj del").each(function() {
					var yuan=$(this).text();
					var xian=$(this).next("a").text();
					if(yuan==xian){
						$(this).hide();
						if($(this).text()=="0.00%"){
							$(this).next("a").text("0费率");
						}
					}
					
				})
			
			/*圆形进度条*/	
			$('.circle').each(function(index, el) {
				/*获取进度条里的数字，乘以100再显示*/
				   var numtext = $(this).find('span').text();
				   var num=numtext*360
				   var nnum=numtext*100;
					$(this).find('span').text(nnum);
					if (num <= 180) {
						$(this).find('.cic_right').css('transform', "rotate(" + num + "deg)");
					} 
					else {
						$(this).find('.cic_right').css('transform', "rotate(180deg)");
							var self = this;
							  $(self).find('.cic_left').css('transform', "rotate(" + (num - 180) + "deg)");
					}
				});
			
			$("tbody").empty();
			$.each(data0.data.YXZHCYGP,function(i){
				//alert(data0.data.YXZHCYGP[i].SNAME); 持仓股票名称
				//alert(data0.data.YXZHCYGP[i].RATIO); 持仓比率
				//alert(data0.data.YXZHCYGP[i].CHG); 涨跌幅
				//alert(data0.data.YXZHCYGP[i].CODE); 股票代码
				var tr="<tr><td class='left'><a href='http://m.coop.eastmoney.com/ttjj/stock.html?code="+data0.data.YXZHCYGP[i].CODE+"'>"+data0.data.YXZHCYGP[i].SNAME+"</a></td><td class='right'>"+data0.data.YXZHCYGP[i].RATIO+"%</td><td class='right red'>"+data0.data.YXZHCYGP[i].CHG+"</td></tr>";
				$("tbody").append(tr);
			})
			/*如果.red获取的text就是“-”那就变黑色，如果获得的text去掉%转成int后<0，就是绿色*/
			$(".red").each(function() {
				var zdf=$(this).text();		
				if(zdf=="-"){$(this).addClass("black");}	
				else{
					var dfnum=zdf.substring(0, zdf.length-1);
					if(dfnum<0){$(this).addClass("green");}
					}
			})
			
			
		},
		error : function(errorMsg) {  
        	alert("报告大王，图表请求数据失败啦！");   
        }  
	})
	/*ajax结束*/
	}

	
	
});



 

</script>

 
         

</body>
</html>
